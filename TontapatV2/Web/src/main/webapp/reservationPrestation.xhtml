<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" >
<!-- 	xmlns:p="http://primefaces.org/ui" -->

<h:head>
	<ui:insert name="head">
<!-- 	ui insert javascript files -->
<!-- 	<h:outputScript name="jsf.js" library="javax.faces" target="head"/> -->
	</ui:insert>
</h:head>

<ui:composition template="/arch.xhtml">
<ui:define name="content">

	Ajustez votre prestation !<br/>
	Matériel enregistré sur votre terrain (gratuit):
	<ul>
		<ui:repeat var="qe" value="#{mbReservation.prp.equipementSurTerrain}" >
			<li><h:outputLabel value="#{qe.quantite}" /><h:outputLabel value="#{qe.equipement.uniteRef.libelleUnite}" /> de <h:outputLabel value="#{qe.equipement.libelleEquipement}" /></li>
		</ui:repeat>
	</ul>
	<hr/>
	<h:form id="prpForm">
		<p>Nb d'animaux du troupeau : <h:outputText value="#{mbReservation.prp.nbTotalAnimauxTroupeau}"/></p>
		<p>Nb d'animaux du troupeau disponilbes à ces dates: <h:outputText value="#{mbReservation.prp.nbAnimauxTroupeauDispo}"/></p>
		<b:panel style-class="cat-margin-top-3rem cat-margin-bottom-5rem 
			col-sm-offset-1 col-md-offset-2 col-xs-12 col-sm-10 col-md-8">
<!-- 			<b:row> -->
<!-- 				<b:column> -->
<!-- 					<b:dateTimePicker id="cdate1" mode="toggle-icon" showWeek="true" -->
<!-- 						firstDay="1" value="#{mbReservation.prp.dateDebut}" required="true" -->
<!-- 						label="Date Début:" label-col-sm="5" col-sm="6" onmouseout="#{mbReservation.updateView()}" process="prpForm" update="prpForm" /> -->
<!-- 						<f:ajax listener="#{mbReservation.updateView()}" execute="@form" render="@form" /> -->
<!-- 					</b:dateTimePicker> -->
<!-- 				</b:column> -->
<!-- 			</b:row> -->
			<b:row>
				<b:column>
					<b:datepicker id="cdate1" mode="toggle-icon" showWeek="true"
							firstDay="1" value="#{mbReservation.prp.dateDebut}" required="true"
							label="Date de Début:" label-col-sm="5" col-sm="6" />
				</b:column>
			</b:row>
			<b:row>
				<b:column>
					<b:datepicker id="cdate2" mode="toggle-icon" showWeek="true"
							firstDay="1" value="#{mbReservation.prp.dateFin}" required="true"
							label="Date de Fin:" label-col-sm="5" col-sm="6" />
				</b:column>
			</b:row>
			<b:row>
				<b:column>
					<b:datepicker id="cdate3" mode="toggle-icon" showWeek="true"
							firstDay="1" value="#{mbReservation.prp.premiereVisite}" required="true"
							label="Date d'Etats des Lieux:" label-col-sm="5" col-sm="6" />
				</b:column>
			</b:row>
		</b:panel>
		<hr/>
	<h:panelGroup>
		<p>Prix Total: 
			<h:outputText value="#{mbReservation.prp.cout}" >
				<f:convertNumber maxFractionDigits = "2" />
			</h:outputText>
		</p>
		<p>Qualité Tonte : 
			<h:outputText value="#{mbReservation.prp.qualiteTonte}" >
				<f:convertNumber maxFractionDigits = "2" />
			</h:outputText>
		</p>
		<p>Bien être animal : 
			<h:outputText value="#{mbReservation.prp.bienEtreAnimal}" >
				<f:convertNumber maxFractionDigits = "2" />
			</h:outputText>
		</p>
		<p>Nbre d'animaux : <h:outputText value="#{mbReservation.prp.nbAnimaux}" /></p>
		<p>Nbre d'animaux recommandés: <h:outputText value="#{mbReservation.prp.nbAnimauxRecommande}" /></p>
		<p>Longueur cloture: <h:outputText id="longueur" value="#{mbReservation.prp.longueurCloture}" /></p>
		<hr/>
  		<b:column>
    		<b:slider2 id="slid1" ajax="true" mode="badge" min="0" max="200" span="10" value="#{mbReservation.prp.longueurCloture}" label="Longueur clôture" action="#{mbReservation.updateView()}">
				<f:ajax listener="#{mbReservation.updateView()}" execute="@form" render="@form" />
    		</b:slider2>
  		</b:column>
  		<b:column>
    		<b:slider2 id="slid2" ajax="true" mode="badge" min="5" maxValue="#{mbReservation.prp.nbAnimauxTroupeauDispos}" span="10" value="#{mbReservation.prp.nbAnimaux}" label="Nb. d'Animaux" action="#{mbReservation.updateView()}">
				<f:ajax listener="#{mbReservation.updateView()}" execute="@form" render="@form" />
    		</b:slider2>
  		</b:column>

		<h:commandButton value="Mise à Jour" action="#{mbReservation.updateView}">
 			<f:ajax execute="@form" render="@form" />
 		</h:commandButton>
		<h:commandButton value="Valider" action="#{mbReservation.validerPrestationParClient}">
  			<f:ajax execute="@form" render="@form" />
 		</h:commandButton>
 	</h:panelGroup>
  	</h:form>
<!--  test ajax on slider (ok), but not on datetimepicker -->
<!-- 		<p:column> -->
<!-- 			<p>Nbre d'animaux : <h:outputText id="textNbAnimaux" value="#{mbReservation.prp.nbAnimaux}" /></p> -->
<!-- 			<h:inputHidden id="htnb" value="#{mbReservation.prp.nbAnimaux}" /> -->
<!--     		<p:slider id="slid1" for="htnb" minValue="5" maxValue="#{mbReservation.prp.nbTotalAnimauxTroupeau}" display="textNbAnimaux"> -->
<!--     			<p:ajax event="slideEnd" listener="#{mbReservation.updateAjaxPrimefaces}" process="prpForm" update="prpForm"/> -->
<!--     		</p:slider> -->
<!--   		</p:column> -->
<!--   		<hr/> -->
<!--   		<p:column> -->
<!-- 			<p>Longueur clôture : <h:outputText id="textLongueur" value="#{mbReservation.prp.longueurCloture}" /></p> -->
<!-- 			<h:inputHidden id="hlc" value="#{mbReservation.prp.longueurCloture}" /> -->
<!--     		<p:slider id="slid2" for="hlc" minValue="0" maxValue="300" display="textLongueur"> -->
<!--     			<p:ajax event="slideEnd" listener="#{mbReservation.updateAjaxPrimefaces}" process="prpForm" update="prpForm"/> -->
<!--     		</p:slider> -->
<!--   		</p:column>  		 -->
<!-- 		<b:column> -->
<!--     		<b:slider2 mode="badge" min="1" max="200" span="10" value="#{mbReservation.prp.longueurCloture}" label="Longueur clôture"  -->
<!--     			onchange="alert('Before the AJAX call');jsf.ajax.request(this, event,  -->
<!--      				{execute:'prpForm', render:'prpForm'}); return false;" -->
<!--     				actionListener="#{mbReservation.testUpdateAjax()}" > -->
<!--     		</b:slider2> -->
<!--   		</b:column> -->

</ui:define>
</ui:composition>
</html>
